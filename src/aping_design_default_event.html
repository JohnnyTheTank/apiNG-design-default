<div class="aping-design-default aping-design-default-event">
    <div ng-controller="apingDefaultDesignController">
        <div data-images-loaded masonry class="row" preserve-order reload-on-show ng-show="workingCopy">
            <div class="masonry-brick col-lg-4 col-sm-6" ng-repeat="feed in workingCopy | orderBy: 'start_timestamp': true"
                 ng-cloak>

                <div class="box">
                    <div class="box-content text-center"><h4 ng-if="feed.caption">{{::feed.caption}}</h4></div>
                    <div class="box-header" ng-if="feed.img_url">
                        <a ng-if="feed.ticket_url" ng-href="{{::feed.ticket_url}}" target="_blank" class="aping-picture-link">
                            <img ng-src="{{::feed.img_url}}" class="main-image img-responsive" alt="{{::feed.caption}}" title="{{::feed.caption}}">
                        </a>
                        <img ng-if="!feed.ticket_url" ng-src="{{::feed.img_url}}" class="main-image img-responsive" alt="{{::feed.caption}}" title="{{::feed.caption}}">
                    </div>
                    <div class="box-content">
                        <div>
                            <strong>Date</strong>
                            <br>
                            {{::feed.start_timestamp | date}}
                            <span ng-if="feed.end_timestamp">- {{::feed.end_timestamp | date}}</span>
                        </div>
                        <br>
                        <strong>Location</strong>
                        <br>
                        <span ng-if="feed.place_name">
                            <span ng-if="!feed.latitude || !feed.longitude">{{::feed.place_name | uppercase}}</span>
                            <span ng-if="feed.latitude && feed.longitude"><a target="_blank" ng-href="http://www.google.com/maps/place/{{feed.latitude}},{{feed.longitude}}/@{{feed.latitude}},{{feed.longitude}}">{{::feed.place_name | uppercase}}</a></span>
                        </span>
                        <span ng-if="feed.city || feed.country">
                            in <span ng-if="feed.city">{{::feed.city}}</span><span ng-if="feed.country"><span ng-if="feed.city">, </span>{{::feed.country}}</span>
                        </span>

                        <br><br>

                        <div ng-if="feed.text" linkify>
                            {{::feed.text | limitTo: 245}}{{::feed.text.length > 245 ? '...' : ''}}
                        </div>

                        <br>

                        <div class="pull-left text-left">
                            <div ng-if="feed.ticket_url || feed.event_url">
                                <div><a ng-if="feed.ticket_url "href="{{::feed.ticket_url}}" target="_blank">Ticketlink</a></div>
                                <div><a ng-if="feed.event_url" href="{{::feed.event_url}}" target="_blank">Eventlink</a></div>
                            </div>
                            <div am-time-ago="{{::feed.timestamp}}"></div>
                        </div>

                        <div class="pull-right platform-box">
                            <a ng-href="{{::feed.event_url}}" target="_blank" class="platform-link">
                                <img ng-src="{{getPlatformIcon(feed.platform)}}" alt="{{feed.platform}}"
                                     title="{{feed.platform}}" class="platform-icon">
                            </a>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>